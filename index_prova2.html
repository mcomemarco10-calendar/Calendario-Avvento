<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<title>Puzzle Quiz 5x5</title>
<style>
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #222;
    color: white;
    font-family: Arial, sans-serif;
  }

  #puzzle-container {
    position:relative;
    width:500px;
    height:500px;
    border:3px solid #fff;
    background-image: url('https://media-assets.vanityfair.it/photos/672f782d22f064101b9b5d29/16:9/w_1024,h_576,c_limit/50%20anni%20di%20Leonardo%20DiCaprio_curiosit%C3%A0-Academy%20of%20Motion%20Picture%20Arts%202024.jpg');
    background-size: cover;
    background-position: center;
    transition: transform .3s ease;
  }

  .piece {
    position: absolute;
    cursor: pointer;
  }

  .disabled {
    pointer-events: none;
  }
</style>
</head>
<body>

<div id="puzzle-container"></div>

<script>
const container = document.getElementById("puzzle-container");

// ---- ROTAZIONE CASUALE (multipli di 90°) ----
const rotations = [0, 90, 180, 270];
const randomRotation = rotations[Math.floor(Math.random() * rotations.length)];
container.style.transform = `rotate(${randomRotation}deg)`;

// ---- SETTINGS ----
const rows = 5;
const cols = 5;
const totalPieces = rows * cols;
let questionIndex = 0;
let answeredPieces = 0;

// ---- DOMANDE ----

// ---- CREAZIONE PEZZI ----
for (let r = 0; r < rows; r++) {
  for (let c = 0; c < cols; c++) {

    const piece = document.createElement("div");
    piece.classList.add("piece");

    const size = container.offsetWidth / rows;
    piece.style.width = `${size}px`;
    piece.style.height = `${size}px`;
    piece.style.left = `${c * size}px`;
    piece.style.top = `${r * size}px`;

    // colore casuale opaco (no trasparenza)
    piece.style.backgroundColor = `hsl(${Math.random()*360}, 50%, 20%)`;

    piece.addEventListener("click", () => handleAnswer(piece));

    container.appendChild(piece);
  }
}

// ---- LOGICA RISPOSTA ----
function handleAnswer(piece) {
  const answer = prompt(questions[questionIndex] || "Domanda").trim().toLowerCase();
  const correct = checkAnswer(questionIndex, answer);

  if (correct) {
    piece.remove();
  } else {
    piece.style.backgroundColor = "rgb(50,50,50)";
    piece.classList.add("disabled");
  }

  questionIndex++;
  answeredPieces++;

  if (answeredPieces >= totalPieces) {
    alert("Puzzle completato!");
  }
}

// ---- RISPOSTE CORRETTE ----
function checkAnswer(index, answer) {
  const questions = [
    "Agatha Christie è nata Prima o Dopo il 1900? (Rispondere solo Prima o Dopo)",
    "La famosa serie TV 'Poirot' ha Più o Meno di 50 episodi? (Rispondere con Più o Meno)",
    "Agatha Christie ha scritto Più o Meno di 40 romanzi con protagonista Poirot? (Rispondere con Più o Meno)",
    "Quale famosa investigatrice, creata da Agatha Christie, fu interpretata da Angela Lansbury nel film Assassinio allo specchio? (Scrivere il titolo e il cognome, entrambi in maiuscolo)",
    "Il secondo marito di Agatha Christie faceva la stessa professione di Indiana Jones, cioè quale? (Rispondere con il nome del lavoro in maiuscolo, per esempio 'Operaio')",
    "Agatha Christie ha mai scritto romanzi che non siano gialli? (Rispondere solo Sì o No)",
    "Come si chiama l'ultimo romanzo con protagonista Poirot?",
    "Agatha Christie risulta essere il secondo scrittore (maschile inteso come neutrale) inglese più tradotto nella storia. Il primo è un famosissimo drammaturgo, chi? (Rispondere con nome e cognome, entrambi maiuscoli. Attenti allo spelling)",
    "Poirot è francese? (Rispondere solo con Sì o No)",
    "Nella trasposizione cinematografica della sua opera 'Testimone d'accusa' recita il padre di una famosa cantante statunitense-italiana. Chi è questa cantante, che sposò un altro famoso cantante italiano? (Rispondere con Nome e Cognome)",
    "Agatha Christie ha vissuto più o meno di 80 anni? (Rispondere solo Più o Meno)",
    "Il primo adattamento cinematrografico di 'Assassinio sull'Oriente Express' ricevette 6 nomination all'Oscar. Quanti ne vinse? (Rispondere solo con il numero)",
    "Il suo romanzo più venduto è 'Assassinio sull'Orient Express'? (Rispondere solo con Sì o No)",
    "Il primo adattamento cinematrografico di 'Assassinio sul Nilo' vede tra le attrici la famosa Angela Lansbury, conosciuta in Italia per quale serie tv trasmessa su Rete 4? (Scrivere il titolo italiano della serie, solo la prima lettera del nome della serie deve essere maiuscola)",
    "Agatha Christie è nata nella contea della Cornovaglia o del Devon? (Rispondere solo con Cornovaglia o Devon)",
    "Nell'ultimo suo romanzo, Poirot muore? (Rispondere solo con Sì o No)"
];

const answers = [
    "Prima",
    "Più",
    "Meno",
    "Miss Marple",
    "Archeologo",
    "Sì",
    "Sipario",
    "William Shakespeare",
    "No",
    "Romina Power",
    "Più",
    "1",
    "No",
    "La signora in giallo",
    "Devon",
    "Sì"
];

  return answer.includes(accepted[index]);
}
</script>

</body>
</html>
